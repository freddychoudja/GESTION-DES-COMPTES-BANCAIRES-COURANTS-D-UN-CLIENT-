{% extends 'banking/base.html' %}

{% block title %}Virement{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-6">
        <h2><i class="bi bi-arrow-left-right"></i> Effectuer un Virement</h2>
        <p class="text-muted">De: {{ compte.type_compte }} - {{ compte.iban }}</p>
        <p>Solde actuel: <span class="badge bg-success">{{ compte.solde }} F CFA</span></p>
        
        <form method="post" class="mt-4">
            {% csrf_token %}
            
            {% if form.non_field_errors %}
                <div class="alert alert-danger">
                    {% for error in form.non_field_errors %}
                        {{ error }}
                    {% endfor %}
                </div>
            {% endif %}

            <div class="mb-3">
                <label for="{{ form.compte_source.id_for_label }}" class="form-label">{{ form.compte_source.label }}</label>
                {{ form.compte_source }}
                {% if form.compte_source.errors %}
                    <div class="text-danger small">{{ form.compte_source.errors }}</div>
                {% endif %}
            </div>

            <div class="mb-3">
                <label for="{{ form.iban_destination.id_for_label }}" class="form-label">{{ form.iban_destination.label }}</label>
                {{ form.iban_destination }}
                {% if form.iban_destination.errors %}
                    <div class="text-danger small">{{ form.iban_destination.errors }}</div>
                {% endif %}
            </div>

            <div class="mb-3">
                <label for="{{ form.montant.id_for_label }}" class="form-label">{{ form.montant.label }}</label>
                {{ form.montant }}
                {% if form.montant.errors %}
                    <div class="text-danger small">{{ form.montant.errors }}</div>
                {% endif %}
            </div>

            <div class="mb-3">
                <label for="{{ form.description.id_for_label }}" class="form-label">{{ form.description.label }}</label>
                {{ form.description }}
                {% if form.description.errors %}
                    <div class="text-danger small">{{ form.description.errors }}</div>
                {% endif %}
            </div>

            <div class="d-grid gap-2 d-md-block">
                <button type="submit" class="btn btn-warning"><i class="bi bi-check-circle"></i> Confirmer le Virement</button>
                <a href="{% url 'dashboard' compte.id %}" class="btn btn-secondary">Annuler</a>
            </div>
        </form>
    </div>
</div>
{% endblock %}
